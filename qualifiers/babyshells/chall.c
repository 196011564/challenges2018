#include "chall.h"

v0 banner()
{
	puts("\e[49m                                         \n\e[0m" \
"\e[49m             \e[49m\e[38;5;250m▄▄▄▄▄\e[49m                       \n\e[0m" \
"\e[49m          \e[49m\e[38;5;250m▄\e[49m\e[38;5;231m▄\e[48;5;250m\e[38;5;253m▄\e[48;5;231m\e[38;5;253m▄▄\e[48;5;231m   \e[48;5;250m\e[38;5;231m▄▄▄\e[49m\e[38;5;231m▄\e[49m\e[38;5;250m▄▄▄▄▄▄\e[49m\e[38;5;231m▄▄▄▄\e[49m\e[38;5;250m▄\e[49m        \n\e[0m" \
"\e[49m          \e[48;5;250m \e[48;5;231m \e[48;5;253m  \e[48;5;231m                  \e[48;5;253m\e[38;5;231m▄\e[48;5;250m\e[38;5;253m▄\e[49m\e[38;5;250m▄\e[49m      \n\e[0m" \
"\e[49m          \e[48;5;250m \e[48;5;231m \e[48;5;253m  \e[48;5;231m                    \e[48;5;253m\e[38;5;231m▄\e[48;5;250m \e[49m     \n\e[0m" \
"\e[49m         \e[49m\e[38;5;250m▄\e[48;5;253m   \e[48;5;231m      \e[48;5;231m\e[38;5;94m▄▄▄▄▄\e[48;5;231m\e[38;5;229m▄\e[48;5;231m          \e[48;5;250m\e[38;5;253m▄\e[49m\e[38;5;250m▄\e[49m    \n\e[0m" \
"\e[49m       \e[49m\e[38;5;250m▄\e[48;5;250m\e[38;5;231m▄\e[48;5;231m\e[38;5;253m▄\e[48;5;253m   \e[48;5;231m  \e[48;5;231m\e[38;5;229m▄\e[48;5;229m\e[38;5;94m▄\e[48;5;94m\e[38;5;221m▄▄\e[48;5;215m\e[38;5;221m▄▄▄▄▄\e[48;5;94m\e[38;5;215m▄▄▄\e[48;5;229m\e[38;5;94m▄\e[48;5;231m        \e[48;5;250m\e[38;5;253m▄\e[49m    \n\e[0m" \
"\e[49m    \e[49m\e[38;5;250m▄\e[48;5;231m\e[38;5;253m▄\e[48;5;253m       \e[48;5;253m\e[38;5;229m▄\e[48;5;94m\e[38;5;215m▄\e[48;5;221m       \e[48;5;229m   \e[48;5;221m\e[38;5;229m▄\e[48;5;221m  \e[48;5;94m\e[38;5;215m▄\e[48;5;229m\e[38;5;94m▄\e[48;5;231m\e[38;5;229m▄\e[48;5;231m      \e[48;5;250m\e[38;5;253m▄\e[49m\e[38;5;250m▄\e[49m  \n\e[0m" \
"\e[49m   \e[48;5;250m \e[48;5;231m\e[38;5;253m▄\e[48;5;253m       \e[48;5;231m \e[48;5;94m \e[48;5;215m \e[48;5;221m        \e[48;5;229m\e[38;5;221m▄▄▄▄\e[48;5;221m  \e[48;5;215m \e[48;5;94m \e[48;5;231m       \e[48;5;250m \e[49m  \n\e[0m" \
"\e[49m  \e[48;5;250m \e[48;5;231m\e[38;5;253m▄\e[48;5;253m       \e[48;5;253m\e[38;5;231m▄\e[48;5;229m\e[38;5;94m▄\e[48;5;94m\e[38;5;215m▄\e[48;5;215m\e[38;5;221m▄\e[48;5;221m\e[38;5;94m▄\e[48;5;221m \e[48;5;221m\e[38;5;94m▄▄\e[48;5;221m    \e[48;5;221m\e[38;5;229m▄\e[48;5;221m\e[38;5;94m▄\e[48;5;229m\e[38;5;221m▄\e[48;5;229m\e[38;5;94m▄▄\e[48;5;221m \e[48;5;215m\e[38;5;221m▄\e[48;5;94m\e[38;5;215m▄\e[48;5;229m\e[38;5;94m▄\e[48;5;231m      \e[48;5;250m\e[38;5;231m▄\e[49m\e[38;5;250m▄\e[49m \n\e[0m" \
"\e[49m  \e[48;5;250m \e[48;5;253m        \e[48;5;231m \e[48;5;94m \e[48;5;215m \e[48;5;221m \e[48;5;94m \e[48;5;94m\e[38;5;172m▄\e[48;5;172m  \e[48;5;221m     \e[48;5;94m \e[48;5;94m\e[38;5;172m▄\e[48;5;172m  \e[48;5;221m  \e[48;5;215m \e[48;5;94m \e[48;5;231m       \e[48;5;250m \e[49m \n\e[0m" \
"\e[49m  \e[49m\e[38;5;250m▀\e[48;5;252m\e[38;5;250m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m       \e[48;5;229m\e[38;5;231m▄\e[48;5;94m \e[48;5;215m \e[48;5;221m\e[38;5;210m▄\e[48;5;94m\e[38;5;210m▄\e[48;5;94m\e[38;5;215m▄▄\e[48;5;221m\e[38;5;215m▄▄▄▄▄▄\e[48;5;94m\e[38;5;215m▄▄\e[48;5;94m\e[38;5;210m▄\e[48;5;221m\e[38;5;215m▄\e[48;5;215m \e[48;5;94m \e[48;5;229m\e[38;5;231m▄\e[48;5;231m      \e[48;5;231m\e[38;5;253m▄\e[48;5;250m \e[49m \n\e[0m" \
"\e[49m    \e[49m\e[38;5;250m▀\e[48;5;253m\e[38;5;252m▄\e[48;5;253m       \e[48;5;229m\e[38;5;253m▄\e[48;5;210m\e[38;5;94m▄\e[48;5;210m\e[38;5;215m▄▄▄\e[48;5;215m  \e[48;5;94m\e[38;5;229m▄\e[48;5;215m\e[38;5;94m▄▄\e[48;5;215m   \e[48;5;210m\e[38;5;215m▄▄▄\e[48;5;94m \e[48;5;229m\e[38;5;231m▄\e[48;5;231m      \e[48;5;231m\e[38;5;253m▄\e[48;5;250m \e[49m  \n\e[0m" \
"\e[49m     \e[49m\e[38;5;250m▀▀\e[48;5;252m\e[38;5;250m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m     \e[48;5;229m\e[38;5;253m▄\e[48;5;94m\e[38;5;229m▄\e[48;5;215m\e[38;5;94m▄\e[48;5;215m    \e[48;5;229m\e[38;5;215m▄▄\e[48;5;215m    \e[48;5;215m\e[38;5;94m▄\e[48;5;94m\e[38;5;229m▄\e[48;5;229m\e[38;5;231m▄\e[48;5;231m       \e[48;5;250m \e[49m   \n\e[0m" \
"\e[49m        \e[48;5;250m \e[48;5;253m\e[38;5;252m▄▄\e[48;5;252m\e[38;5;253m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m    \e[48;5;231m\e[38;5;253m▄▄\e[48;5;94m\e[38;5;231m▄▄▄▄▄\e[48;5;229m\e[38;5;253m▄\e[48;5;231m\e[38;5;253m▄\e[48;5;231m \e[48;5;231m\e[38;5;253m▄▄\e[48;5;231m    \e[48;5;231m\e[38;5;253m▄▄\e[48;5;253m  \e[49m    \n\e[0m" \
"\e[49m        \e[48;5;250m \e[48;5;253m\e[38;5;252m▄▄\e[48;5;252m\e[38;5;253m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m              \e[48;5;231m\e[38;5;253m▄▄\e[48;5;253m\e[38;5;231m▄\e[48;5;231m\e[38;5;253m▄\e[48;5;253m\e[38;5;231m▄▄\e[48;5;231m\e[38;5;253m▄\e[48;5;253m  \e[48;5;250m \e[49m    \n\e[0m" \
"\e[49m         \e[48;5;250m \e[48;5;252m\e[38;5;253m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m                 \e[48;5;231m\e[38;5;253m▄\e[48;5;253m      \e[48;5;250m \e[49m    \n\e[0m" \
"\e[49m          \e[48;5;252m\e[38;5;253m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m                      \e[48;5;253m\e[38;5;252m▄\e[48;5;252m\e[38;5;250m▄\e[49m\e[38;5;250m▀\e[49m    \n\e[0m" \
"\e[49m          \e[49m\e[38;5;252m▀\e[49m\e[38;5;253m▀\e[48;5;253m\e[38;5;250m▄\e[48;5;253m\e[38;5;252m▄\e[48;5;253m   \e[48;5;253m\e[38;5;252m▄\e[48;5;253m\e[38;5;250m▄▄▄▄▄\e[48;5;253m\e[38;5;252m▄▄\e[48;5;253m      \e[48;5;253m\e[38;5;252m▄\e[48;5;253m\e[38;5;250m▄\e[49m\e[38;5;252m▀\e[49m\e[38;5;250m▀\e[49m      \n\e[0m" \
"\e[49m             \e[49m\e[38;5;250m▀▀▀▀▀\e[49m     \e[49m\e[38;5;250m▀▀▀▀▀▀▀▀▀\e[49m         \n\e[0m" \
"\e[49m\e[38;5;229m▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ BABY SHELLS ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄\n\e[0m");
}

v0 init()
{
  setvbuf(stdout, 0, 2, 0);
  setvbuf(stdin, 0, 2, 0);
}

v0 print_menu()
{
    static u8 menu[] = " \
\nMENU\n \
1) Pwn\n \
2) Quit\n \
> ";
    printf("%s", menu);
}

u32 get_int()
{
  u8 choice_buf[40] =  "";
  read(0, choice_buf, 40);
  return strtoul(choice_buf, NULL, 0);
}

v0 pwn()
{
  char pwn[500] = "";
  printf("gimme gimme: ");
  read(0, pwn, 500);
  printf("pwning!\n");

  u32 (*ret)() = (u32(*)())pwn;
  ret();
}

v0 menu()
{
  u32 choice = 0;
  while(1){
      print_menu();
      choice = get_int();
      switch(choice){
          case 1:
            pwn();
            break;
          case 2:
            exit(0);
            break;
          default:
            break;
    }
  }
}

u32 main(u32 argc, u8 ** argv)
{
	init();
	banner();
	menu();
}